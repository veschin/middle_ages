<!doctype html>
<html lang="en">

<head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="resources/index.css">
    <!-- Bootstrap CSS -->
    <link href="https://myCDN.com/prism@v1.x/themes/prism.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <div id="content"></div>
        <h2>Титульный лист</h2>
        <div class="title-list">
            <h4>МИНИСТЕРСТВО НАУКИ и высшего ОБРАЗОВАНИЯ <br>
                РОССИЙСКОЙ ФЕДЕРАЦИИ</h4>
            <h4>федеральное государственное бюджетное образовательное учреждение
                высшего профессионального образования</h4>
            <h4>«АЛТАЙСКИЙ ГОСУДАРСТВЕННЫЙ УНИВЕРСИТЕТ»
                Колледж Алтайского государственного университета
                Отделение экономики и информационных технологий</h4>
            <h4>Лабораторная работа по предмету <br> Технология разработки и защиты баз данных</h4>
            <h5 class="title-name">Выполнил студент 3 курса <br>
                группы 283асп <br>
                Вещин Олег Олегович
            </h5>
            <h4 style="margin-top: 150px;">Барнаул 2020</h4>
        </div>
        <h2>Цели и задачи бд</h2>
        <div class="goals-list">
            <p>База данных необходима для хранения больших объемов информации. В конкретном случае появилась потребность
                в генерации и сборе статистики по данным.
            </p>
        </div>
        <h2>Для кого предназначена бд и анализ предметной области</h2>
        <div class="for-whom">
            <p>База предназначена для заинтересованных энтузиастов, которым нравится смотреть на сгенерированные данные.
            </p>
            <p>Предметная область, это жизни средневековых людей.</p>
        </div>

        <h3>Диаграмма</h3>
        <div class="screenshot">
            <img id="uml" src="resources/img/photo_2020-11-29_17-21-10.jpg" alt="uml" class="rounded mx-auto d-block">
            <p>
            <ul>
                <li>Таблицы Королей,</li>
                <li> Графов,</li>
                <li>Герцогов,</li>
                <li>Баронов,</li>
                <li>Рыцарей</li>
                <li>и Крестьян соответственно.</li>
            </ul>
            </p>
        </div>

        <h3>Таблица бд</h3>
        <p>Данный файл предназначен для описания и создания таблиц.</p>
        <div class="screenshot">
            <img src="resources/img/db/2020-12-03_22-27.png" alt="" class="rounded mx-auto d-block">
            <p>Импорт модулей. Драйвер базы данных и оболчка операционной системы.</p>
        </div>
        <div class="screenshot">
            <img src="resources/img/db/2020-12-03_22-29.png" alt="" class="rounded mx-auto d-block">
            <p>Основные поля в формате векторов. У каждой таблицы есть такие поля как пол, возраст, имя и тд; у
                аристократов есть поля по типу родственников и касты, поэтому было принято решение создать шаблоны.
            </p>
        </div>
        <div class="screenshot">
            <img src="resources/img/db/2020-12-03_22-29_1.png" alt="" class="rounded mx-auto d-block">
            <p>
            <ul>
                <li>Таблицы Королей,</li>
                <li> Графов,</li>
                <li>Герцогов,</li>
                <li>Баронов,</li>
                <li>Рыцарей</li>
                <li>и Крестьян соответственно.</li>
            </ul>
            </p>
        </div>
        <div class="screenshot">
            <img src="resources/img/db/2020-12-03_22-35.png" alt="" class="rounded mx-auto d-block">
            <p>Первая форма, показывает нам во что раскроется шаблон таблицы в языке Clojure.</p>
            <p>Вторая форма показывает какая функция будет использовать вектор с полями.</p>
            <p>Третья форма это уже готовый SQL запрос на создание таблицы.</p>
            <p>Поздравляю, вы только что познакомились с jdbc clojure DDL, благодаря этой
                технологии мы сгенерировали все таблицы за очень малое количество кода. Чем меньше кода, тем меньше
                ошибок и способов запутаться.</p>
        </div>
        <div class="screenshot">
            <img src="resources/img/db/2020-12-03_22-30.png" alt="" class="rounded mx-auto d-block">
            <p>Первая функция удаляет базу данных.</p>
            <p>Вторая функция создает SQL запросы на создание таблиц, на основе наших векторов.</p>
            <p>Третья функция создает базу данных с таблицами по примеру выше.</p>
        </div>
        <div class="screenshot">
            <img src="resources/img/db/2020-12-03_22-30_1.png" alt="" class="rounded mx-auto d-block">
            <p>Так называемая секция комментариев, это правила хорошего тона. Туда помещаются отладочные функции. В
                данном случае это получение таблиц, получение схемы и запрос в определенную таблицу</p>
        </div>
        <video src="resources/videos/db.mp4" autoplay=false></video>
        <h3>Алгоритм генерации данных</h3>
        <p>Данный файл предназначен для описания логики создания записей.</p>
        <div class="screenshot">
            <img src="resources/img/gen_algo/2020-12-03_22-27.png" alt="" class="rounded mx-auto d-block">
            <p>Импорт модулей. Драйвер базы данных, подключение к базе из файла выше, строки, сахар для составления
                запросов.</p>
        </div>
        <div class="screenshot">
            <img src="resources/img/gen_algo/2020-12-03_22-28.png" alt="" class="rounded mx-auto d-block">
            <p>Конфиг имен, который я пропарсил с тематического сайта. Там есть имена женщин и мужчин, а также там
                есть прозвища, которые по логике приложения могли получать короли или рыцари.</p>
            <p>Функция сброса значений. Не заморачивайтесь, просто служебное состояние.</p>
        </div>
        <div class="screenshot">
            <img src="resources/img/gen_algo/2020-12-03_22-28_1.png" alt="" class="rounded mx-auto d-block">
            <p>Функция генерации короля. Если коротко берем имя из конфига и текущий год в переменной. Создаем
                случайные параметры возраста, имени, и прочих цифр. Если интересно, почитайте код, он весь из
                английских слов.</p>
            <p>Ниже будут представлены подобные функции для каждой таблицы, у всех определенные условия на этапе
                генерации. Например родственниками королей могут быть короли или рыцари. Также выходцами знати
                бывают рыцари и короли. Но крестьяне не имеют доступа в эти касты. Просто ради дополнительной
                логики, у крестьян не фиксируются даты рождения и смерти, потому что это средневековье, а жизнь раба
                не стоит ничего.</p>
            <p>Также инетересен принцип выбора прозвищ. Шанс короля или рыцаря получить прозвища 1/5, но если
                человек прожил больше 55, он гарантированно получает второе имя. А еще у разных людей, могут быть
                случайные потомки из разных каст, с соблюдением предыдущей логики</p>
        </div>
        <div class="screenshot">
            <img src="resources/img/gen_algo/2020-12-05_14-50.png" alt="" class="rounded mx-auto d-block">
            <p>Вот пример генерации королей. У каждого свой возраст, имя, даты и прочие параметры.</p>
        </div>
        <div class="screenshot">
            <img src="resources/img/gen_algo/2020-12-03_22-28_2.png" alt="" class="rounded mx-auto d-block">

        </div>
        <div class="screenshot">
            <img src="resources/img/gen_algo/2020-12-03_22-28_3.png" alt="" class="rounded mx-auto d-block">

        </div>
        <div class="screenshot">
            <img src="resources/img/gen_algo/2020-12-03_22-28_4.png" alt="" class="rounded mx-auto d-block">

        </div>

        <h3>Заполнение базы данными</h3>
        <p>Этот файл нужен (не очевидно, приготовьтесь) чтобы заполнить базу данными.</p>
        <div class="screenshot">
            <img src="resources/img/data_fill/2020-12-03_22-28_4.png" alt="" class="rounded mx-auto d-block">
            <p>Импорт модулей. Драйвер базы данных, соединение с базой и функция создания базы, сахар для
                составления
                запросов и алгоритм генерации.</p>
        </div>
        <div class="screenshot">
            <img src="resources/img/data_fill/2020-12-03_22-31.png" alt="" class="rounded mx-auto d-block">
            <p>Функции генерации данных. Порядок вызова внутри, это сброс состояния и создание записей 1000/3000
                раз.</p>
        </div>
        <div class="screenshot">
            <img src="resources/img/data_fill/2020-12-03_22-31_1.png" alt="" class="rounded mx-auto d-block">
            <p>Служебная функция для вызова всех функций после создания базы данных. Получается, мы можем запустить
                только ее и у нас автоматически создастся база данных и заполнится случайными записями.</p>
        </div>


        <h2></h2>
        <!-- (.screenshot>img[class="rounded mx-auto d-block"]+p)*5 -->
        <div class="screenshot">
            <img src="resources/img/queries/2020-12-05_17-04.png" alt="" class="rounded mx-auto d-block">
            <p>Импорт модулей, как обычно...</p>
        </div>
        <div class="screenshot">
            <img src="resources/img/queries/2020-12-05_17-05.png" alt="" class="rounded mx-auto d-block">
            <p>Создал свою функцию для запросов. Взял обычную функцию для общения с базой и интегрировал туда запросы в
                виде хэш-мапок.</p>
            <p>Функия для получения короля и его приемника на троне. На вход конкретный король. Внутри функции мы
                сначала получаем короля, а потом забираем его <code>:heir_id</code> и по нему получаем наследника или
                наследницу.</p>
        </div>
        <div class="screenshot">
            <img src="resources/img/queries/2020-12-05_17-06_1.png" alt="" class="rounded mx-auto d-block">
            <p>Вот вызов и результат. Приемница короля Уинфреда, королева Изабелла.</p>
        </div>
        <div class="screenshot">
            <img src="resources/img/queries/2020-12-05_17-05_1.png" alt="" class="rounded mx-auto d-block">
            <p>Функция для получения знати и родственника. На вход подается таблица и конкретный представитель знати.
                Запрашиваем человека, достаем оттуда конкретную касту к которой он относится, по принадлежнлсти к
                феодальному слою, делаем <code>RIGHT JOIN</code> в другую таблицу. Можно было сделать это и проще
                средствами языка, но цель была показать как обычные запросы можно строить при помощи структур и SQL.
            </p>
        </div>
        <div class="screenshot">
            <img src="resources/img/queries/2020-12-05_17-06_2.png" alt="" class="rounded mx-auto d-block">
            <p>В результате узнаем что родственником рыцаря Хамона через 5000 лет стал король Рандольф 2.</p>
        </div>
        <div class="screenshot">
            <img src="resources/img/queries/2020-12-05_17-06.png" alt="" class="rounded mx-auto d-block">
            <p>Функция получения королей при которых жил крестьянин. На вход подается конкретный крестьянин. Запрашиваем
                человека, вычленяем из ответа список королей. Если человеку повезло прожить жизнь во время затишься без
                королей, мы получим сообщение об этом. В обратном случае, мы получим список королей</p>
        </div>
        <div class="screenshot">
            <img src="resources/img/queries/2020-12-05_17-06_3.png" alt="" class="rounded mx-auto d-block">
            <p>Без комментариев, сначала идет крестьянин, за ним сообщение/король/короли</p>
            <p>В данном случае функция выполнилась 5 раз, для разнообразия результатов</p>
        </div>

    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <script src="https://myCDN.com/prism@v1.x/components/prism-core.min.js"></script>
    <script src="https://myCDN.com/prism@v1.x/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
<style>
    .container {
        font-family: 'Nunito', sans-serif;
        /* background-color: #86adcc;
        color: #ffffff; */
        max-width: 50%;
        margin-top: 30px;
        margin-left: auto;
        margin-right: auto;
    }

    .title-name {
        margin-top: 30px;
        text-align: right;
    }

    img {
        margin-top: 10px;
        margin-bottom: 10px;
    }

    #uml {
        width: 140%;
    }

    video {
        width: 1300px;
        margin: 0 auto;
    }

    h2,
    h3 {
        margin-top: 50px;
    }

    p {
        text-align: justify;
        text-indent: 1.5em;
        font-size: 22px;
    }

    h1,
    h2,
    h3,
    h4 {
        text-align: center;
        /* color: #ffffff; */
        padding-bottom: 20px;
    }
</style>

</html>